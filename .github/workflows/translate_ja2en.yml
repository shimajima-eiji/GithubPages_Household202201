name: CI
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: 環境構築
        run: |
          sudo apt install python3 pip curl
          pip install requests pathlib git+https://github.com/alainrouillon/py-googletrans@feature/enhance-use-of-direct-api googletrans==4.0.0-rc1

      - name: curl
        run: |
          curl -sf https://raw.githubusercontent.com/shimajima-eiji/__Operation-Maintenance/main/translate/translate_path.py >run.py 
          ls

      - name: 翻訳
        run: |
          python3 run.py https://script.google.com/macros/s/{{ secrets.GASID }}/exec .
          rm run.py
          
          ls
