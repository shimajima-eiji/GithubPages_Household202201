<p>以前までJAMStack信仰にどっぷり使っていた私ですが、ライブラリのメンテナンスや最新化への対応に疲れてしまいました。<br>
結局のところ、JAMStackでwordpressの代替はできますが、運用レベルで考えると面倒くさいので現実的ではないと感じて、wordpressに戻ってきてしまう事になりました。</p>
<p>が、JAMStackで得たノウハウはwordpressにも活かせるので、意味がなかったとは思えませんでした。<br>
今回は、最初から運用を想定してwordpress/JAMStack(本稿ではJAMStackではありませんが、得た知見のお話なので間違ってはいない)のいいとこ取りを考えていきます。</p>
<h2>
<span id="取り上げること" class="fragment"></span><a href="#%E5%8F%96%E3%82%8A%E4%B8%8A%E3%81%92%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>取り上げること</h2>
<ul>
<li>wordpressで静的サイトを作ってサーバーにデプロイするまで</li>
<li>(参考情報)どういったプラグインを使って運用しているのか、実例紹介</li>
</ul>
<h2>
<span id="取り上げないこと" class="fragment"></span><a href="#%E5%8F%96%E3%82%8A%E4%B8%8A%E3%81%92%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>取り上げないこと</h2>
<ul>
<li>この運用における問題点や課題
<ul>
<li>まだ知見がないので、実務では採用しようとは思いません。</li>
<li>wordpressを使うので、wordpressの問題点をそのまま受け入れる事になります</li>
</ul>
</li>
<li>懸念事項
<ul>
<li>極端な話、静的サイトジェネレーターとしたプラグイン自体のソースコードを見たわけではないです</li>
<li>どういった処理と相性が悪いのか分からないので、使えないプラグインがあるはず。</li>
</ul>
</li>
</ul>
<h2>
<span id="最低限の機能を実装する" class="fragment"></span><a href="#%E6%9C%80%E4%BD%8E%E9%99%90%E3%81%AE%E6%A9%9F%E8%83%BD%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>最低限の機能を実装する</h2>
<p>とりあえず記事を書いて公開するところだけやります。</p>
<h3>
<span id="wordpressで静的ファイルを出力する" class="fragment"></span><a href="#wordpress%E3%81%A7%E9%9D%99%E7%9A%84%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>wordpressで静的ファイルを出力する</h3>
<p>まずはこれが出来ない事には話になりません。<br>
app/public以下に必要なファイルなどが置かれるのは分かっているので、以下必要なファイルを選定します。<br>
プラグインなどで複雑な事をしなければ面倒くさいけど難しくない作業です。<br>
すごく極端な話をすれば、Seleniumなどでサイトを巡回してソースをぶっこぬいてしまうのが手っ取り早いです。</p>
<p>が、そんな事をしなくてもプラグインでいい感じにやってくれるものがいっぱいあるので、要件にあったものを探してみましょう。</p>
<h3>
<span id="ホスティングサーバーを決める" class="fragment"></span><a href="#%E3%83%9B%E3%82%B9%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%92%E6%B1%BA%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>ホスティングサーバーを決める</h3>
<p>netlifyとかが有名です。<br>
細かい事を言えばサービスごとの特徴がありますが、今回は感覚で決めてよいです。<br>
APIを使う(axiosとか)予定がないので、本当にファイルを置くだけです。<br>
GithubPagesでも構いません。</p>
<h3>
<span id="静的ファイルをホスティングサーバーにアップロードする" class="fragment"></span><a href="#%E9%9D%99%E7%9A%84%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%83%9B%E3%82%B9%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>静的ファイルをホスティングサーバーにアップロードする</h3>
<p>所定の方法に従います。</p>
<h2>
<span id="運用を考える" class="fragment"></span><a href="#%E9%81%8B%E7%94%A8%E3%82%92%E8%80%83%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>運用を考える</h2>
<ul>
<li>ブラウザで記事を書く</li>
<li>書いた記事をhtmlなどにする
<ul>
<li>プラグインで変換できればブラウザで完結します</li>
<li>htmlなのでコメントができなくなります。必要なら別の方法を検討すべきです</li>
</ul>
</li>
<li>デプロイする
<ul>
<li>デプロイもブラウザでしたいです。</li>
<li>wordpressで完結すればベスト</li>
</ul>
</li>
</ul>
<p>最低限の機能は既にできているので、wordpressで動かす方法を考えていきます。</p>
<h3>
<span id="記事を書く" class="fragment"></span><a href="#%E8%A8%98%E4%BA%8B%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>記事を書く</h3>
<p>これはwordpressの標準機能ですね。</p>
<h3>
<span id="htmlなどにする" class="fragment"></span><a href="#html%E3%81%AA%E3%81%A9%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>htmlなどにする</h3>
<p>これもwordpressのプラグインでやりたいですね。</p>
<h3>
<span id="デプロイする" class="fragment"></span><a href="#%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>デプロイする</h3>
<p>各サイトにファイルをアップロードする事になるでしょうが、githubと連携すればCI(GithubActions)が使えるので、これを使いましょう。<br>
wordpressからgithubにpushできれば解決できそうです。<br>
「wordpress git push」あたりで検索すると色々情報が出てきます。</p>
<h4>
<span id="ciを作る" class="fragment"></span><a href="#ci%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>CIを作る</h4>
<p>ホスティングサービスとGihtubを連携すればいい感じにやってくれるものがありますので、便利なものは使っていきましょう。<br>
必要な設定だけやれば簡単に実現できるはず。</p>
<h2>
<span id="より便利な方法を考えていく" class="fragment"></span><a href="#%E3%82%88%E3%82%8A%E4%BE%BF%E5%88%A9%E3%81%AA%E6%96%B9%E6%B3%95%E3%82%92%E8%80%83%E3%81%88%E3%81%A6%E3%81%84%E3%81%8F"><i class="fa fa-link"></i></a>より便利な方法を考えていく</h2>
<p>色々書いていたんですが、どうしても本題から外れてしまったので、本稿では扱わない事にしました。<br>
リンク先をご覧ください。</p>
<p><qiita-embed-ogp src="https://nomuraya.tk/2022/03/wordpress_manual/"></qiita-embed-ogp></p>
<h2>
<span id="謝辞" class="fragment"></span><a href="#%E8%AC%9D%E8%BE%9E"><i class="fa fa-link"></i></a>謝辞</h2>
<p>本稿を執筆するにあたり、多くの技術ブログや質問サイトの方にお世話になりました。<br>
この場を借りまして、御礼申し上げます。</p>
